---
permalink: maintenance-e5700/batteries-replace-supertask-task.html 
sidebar: sidebar 
keywords: E5700 battery, repair E5700 battery, replace E5700 battery, failed E5700 battery 
summary: 更换 E5700 存储系统中发生故障的电池。 
---
= 更换 E5700 电池
:allow-uri-read: 
:experimental: 
:icons: font
:imagesdir: ../media/


[role="lead"]
您可以更换 E5700 存储系统中发生故障的电池。

每个 E5700 控制器箱都包含一个电池，用于在交流电源发生故障时保留缓存的数据。如果 SANtricity System Manager 中的恢复 Guru 报告电池故障状态或需要更换电池状态，则必须更换受影响的电池。

.开始之前
* 验证是否未使用任何卷，或者是否已在使用这些卷的所有主机上安装多路径驱动程序。
* 请查看 link:batteries-intro-concept.html["更换 E5700 电池的要求"]。


.您需要什么？ #8217 ；将需要什么
* 更换电池。
* ESD 腕带，或者您已采取其他防静电预防措施。
* 用于标识连接到控制器箱的每个缆线的标签。
* 一个管理工作站，其浏览器可访问控制器的 SANtricity 系统管理器。（要打开 System Manager 界面，请将浏览器指向控制器的域名或 IP 地址。）




== 第 1 步：使控制器脱机（双工）

如果您采用双工配置，请将受影响的控制器置于脱机状态，以便安全地取出故障电池。未置于脱机状态的控制器必须处于联机状态（处于最佳状态）。


NOTE: 只有当存储阵列具有两个控制器（双工配置）时，才能执行此任务。

.步骤
. 在 SANtricity 系统管理器中，查看恢复 Guru 中的详细信息，确认问题描述具有电池，并确保不需要先解决任何其他问题。
. 从 Recovery Guru 的 Details 区域中，确定要更换的电池。
. 使用 SANtricity 系统管理器备份存储阵列的配置数据库。
+
如果删除控制器时出现问题，您可以使用保存的文件还原配置。系统将保存 RAID 配置数据库的当前状态，其中包括控制器上卷组和磁盘池的所有数据。

+
** 在 SANtricity 系统管理器中：
+
... 选择菜单： Support[ 支持中心 > 诊断 ] 。
... 选择 * 收集配置数据 * 。
... 单击 * 收集 * 。
+
此文件将保存在浏览器的 "Downloads" 文件夹中，名为 * configurationData-<arrayName>-<DateTime>.7z* 。



** 或者，您也可以使用以下命令行界面命令备份配置数据库：
+
`s存取存储阵列 dbmDatabase sourceLocation=Onboard contentType=all file="filename" ；`



. 使用 SANtricity 系统管理器收集存储阵列的支持数据。
+
如果删除控制器时出现问题，您可以使用保存的文件对问题描述进行故障排除。系统会将有关存储阵列的清单，状态和性能数据保存在一个文件中。

+
.. 选择菜单： Support[ 支持中心 > 诊断 ] 。
.. 选择 * 收集支持数据 * 。
.. 单击 * 收集 * 。
+
此文件将保存在浏览器的 "Downloads" 文件夹中，名为 * support-data.7z* 。



. 如果控制器尚未脱机，请立即使用 SANtricity 系统管理器将其脱机。
+
** 在 SANtricity 系统管理器中：
+
... 选择 * 硬件 * 。
... 如果图形显示了驱动器，请选择 * 显示磁盘架背面 * 以显示控制器。
... 选择要置于脱机状态的控制器。
... 从上下文菜单中，选择 * 置于脱机状态 * ，然后确认要执行此操作。
+

NOTE: 如果您正在使用尝试脱机的控制器访问 SANtricity 系统管理器，则会显示 SANtricity 系统管理器不可用消息。选择 * 连接到备用网络连接 * 以使用另一个控制器自动访问 SANtricity 系统管理器。



** 或者，您也可以使用以下命令行界面命令使控制器脱机：
+
* 对于控制器 A ： * `set controller [a] availability = 脱机`

+
* 对于控制器 B ： * `set controller [b] availability = 脱机`



. 等待 SANtricity System Manager 将控制器状态更新为脱机。
+

CAUTION: 更新状态之前，请勿开始任何其他操作。





== 第 2 步：拆下控制器箱

在取出故障电池之前，必须先卸下控制器箱。

.步骤
. 戴上 ESD 腕带或采取其他防静电预防措施。
. 为连接到控制器箱的每个缆线贴上标签。
. 断开控制器箱上的所有缆线。
+

CAUTION: To prevent degraded performance, do not twist, fold, pinch, or step on the cables.

. 如果控制器箱上的主机端口使用 SFP+ 收发器，请保持安装状态。
. 确认控制器背面的缓存活动 LED 是否熄灭。
. 按压凸轮把手上的闩锁，直到其释放为止，然后打开右侧的凸轮把手，以从磁盘架中释放控制器箱。
+
下图是 E5724 控制器架的示例：

+
image::../media/28_dwg_e2824_remove_controller_canister_maint-e5700.gif[28 dwg e2824 卸下控制器箱 maint e5700]

+
* （ 1 ） * _ 控制器箱 _

+
* （ 2 ） * _Cam handle

+
下图是 E5760 控制器架的示例：

+
image::../media/28_dwg_e2860_add_controller_canister_maint-e5700.gif[28 dwg e2860 添加控制器箱维护 e5700]

+
* （ 1 ） * _ 控制器箱 _

+
* （ 2 ） * _Cam handle

. 用两只手和凸轮把手将控制器箱滑出磁盘架。
+

CAUTION: 始终用双手支撑控制器箱的重量。

+
如果要从 E5724 控制器架中卸下控制器箱，则一个翼片会摆入到位以阻止空托架，从而有助于保持气流和散热。

. 将控制器箱翻转，使可拆卸盖朝上。
. 将控制器箱放在无静电的平面上。




== 第 3 步：取出故障电池

从控制器架中取出控制器箱后，请取出电池。

.步骤
. 向下按按钮并滑动控制器箱盖，以卸下控制器箱盖。
. 确认控制器（电池和 DIMM 之间）中的绿色 LED 熄灭。
+
如果此绿色 LED 亮起，则表示控制器仍在使用电池电源。您必须等待此 LED 熄灭，然后才能卸下任何组件。

+
image::../media/28_dwg_e2800_internal_cache_active_led_maint-e5700.gif[28 dwg e2800 内部缓存活动 LED maint e5700]

+
* （ 1 ） * _Internal Cache Active LED_

+
* （ 2 ） * 电池 _

. 找到电池的蓝色释放闩锁。
. 向下推动释放闩锁并将其从控制器箱中移出，以解锁电池。
+
image::../media/28_dwg_e2800_remove_battery_maint-e5700.gif[28 dwg e2800 取出电池维护 e5700]

+
* （ 1 ） * 电池释放闩锁 _

+
* （ 2 ） * 电池 _

. 抬起电池，将其滑出控制器箱。
. 按照您所在地区的相应过程回收或处置故障电池。
+

CAUTION: 为了遵守国际航空运输协会（ IATA ）的规定，请勿通过空中运输电池，除非将其安装在控制器架中。





== 第 4 步：安装新电池

取出故障电池后，请安装一个新电池。

.步骤
. 拆开新电池的包装，将其放在无静电的平面上。
+

NOTE: 为了安全地遵守 IATA 规定，更换电池在发货时的荷电状态（ SoC ）不超过 30% 。重新接通电源时，请记住，在更换电池电量已满且其完成初始学习周期之前，写入缓存不会恢复。

. 调整控制器箱的方向，使电池插槽面向您。
. 将电池略微向下插入控制器箱。
+
您必须将电池前部的金属法兰插入控制器箱底部的插槽中，然后将电池顶部滑入控制器箱左侧的小对齐销下。

. 向上移动电池闩锁以固定电池。
+
当闩锁卡入到位时，闩锁的底部会挂到机箱上的金属插槽中。

+
image::../media/28_dwg_e2800_insert_battery_maint-e5700.gif[28 dwg e2800 插入电池维护 e5700]

+
* （ 1 ） * 电池释放闩锁 _

+
* （ 2 ） * 电池 _

. 将控制器箱翻转，以确认电池安装正确。
+

CAUTION: * 可能的硬件损坏 * —电池前部的金属法兰必须完全插入控制器箱上的插槽（如第一图所示）。如果电池安装不正确（如图 2 所示），则金属法兰可能会接触控制器板，从而在您接通电源时损坏控制器。

+
** * 正确 * —电池的金属法兰已完全插入控制器上的插槽：
+
image:../media/28_dwg_e2800_battery_flange_ok_maint-e5700.gif[""]

** * 不正确 * —电池的金属法兰未插入控制器上的插槽：
+
image:../media/28_dwg_e2800_battery_flange_not_ok_maint-e5700.gif[""]







== 第 5 步：重新安装控制器箱

安装新电池后，将控制器箱重新安装到控制器架中。

.步骤
. 您可以通过将控制器箱盖从背面向前滑动，直到按钮卡入到位来重新安装控制器箱上的盖。
. 将控制器箱翻转，使可拆卸盖朝下。
. 在凸轮把手处于打开位置的情况下，将控制器箱完全滑入控制器架。
+
image::../media/28_dwg_e2824_remove_controller_canister_maint-e5700.gif[28 dwg e2824 卸下控制器箱 maint e5700]

+
* （ 1 ） * _ 控制器箱 _

+
* （ 2 ） * _Cam handle

+
image::../media/28_dwg_e2860_add_controller_canister_maint-e5700.gif[28 dwg e2860 添加控制器箱维护 e5700]

+
* （ 1 ） * _ 控制器箱 _

+
* （ 2 ） * _Cam handle

. 将凸轮把手移至左侧，将控制器箱锁定到位。
. 重新连接所有缆线。




== 第 6 步：使控制器联机（双工）

对于双工配置，请将控制器置于联机状态，收集支持数据并恢复操作。


NOTE: 只有当存储阵列具有两个控制器时，才能执行此任务。

.步骤
. 在控制器启动时，检查控制器 LED 和七段显示器。
+

NOTE: 此图显示了一个控制器箱示例。您的控制器可能具有不同数量和类型的主机端口。

+
重新建立与另一控制器的通信时：

+
** 七段显示将重复显示 * 操作系统 * ， * 其他 * ， * 空白 _* 序列，以指示控制器已脱机。
** 琥珀色警示 LED 仍保持亮起状态。
** 主机链路 LED 可能亮起，闪烁或熄灭，具体取决于主机接口。image:../media/e5700_hic_3_callouts_maint-e5700.gif[""]
+
* （ 1 ） * _Host Link LED_

+
* （ 2 ） * _ 警示 LED （琥珀色） _

+
* （ 3 ） * _seven-segment display_



. 使用 SANtricity 系统管理器使控制器联机。
+
** 在 SANtricity 系统管理器中：
+
... 选择 * 硬件 * 。
... 如果图形显示了驱动器，请选择 * 显示磁盘架背面 * 。
... 选择要置于联机状态的控制器。
... 从上下文菜单中选择 * 置于联机状态 * ，然后确认要执行此操作。
+
系统将控制器置于联机状态。



** 或者，您也可以使用以下命令行界面命令使控制器联机：
+
* 对于控制器 A ： * `set controller [a] availability = 联机；`

+
* 对于控制器 B ： * `set controller [b] availability = 联机；`



. 控制器恢复联机后，确认其状态为最佳，并检查控制器架的警示 LED 。
+
如果状态不是最佳状态或任何警示 LED 均亮起，请确认所有缆线均已正确就位，并检查电池和控制器箱是否已正确安装。如有必要，请拆下并重新安装控制器箱和电池。

+

NOTE: 如果无法解决此问题，请联系技术支持。

. 如果需要，请使用 SANtricity 系统管理器收集存储阵列的支持数据。
+
.. 选择 * 支持 * > * 支持中心 * > * 诊断 * 。
.. 选择 * 收集支持数据 * 。
.. 单击 * 收集 * 。
+
此文件将保存在浏览器的 "Downloads" 文件夹中，名为 * support-data.7z* 。





您的电池更换已完成。您可以恢复正常操作。
